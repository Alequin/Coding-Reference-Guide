<!DOCTYPE html>
<html lang="en">

<head>
  <title>... Summary</title>
  <meta charset="utf-8">
  <link href="../css/basic-layout.css" type="text/css" rel="stylesheet"/>
  <link href="../css/summary-page-layout.css" type="text/css" rel="stylesheet"/>
  <link id="summary-page-layout" href="../css/normal-text-summary-page.css" type="text/css" rel="stylesheet"/>
</head>

<body>

  <div id="header-container">

        <h1 id="main-header">Helpful ...</h1>

        <div id="contents-container">
          <div class="header-divider divider"></div>
          <table id="search-and-sort-table">
            <tr>
              <td>
                <form name="search-form">
                  <input id="contents-search-box" class="section-text-normal" type="text" name="search-term"/>
                </form>
              </td>
              <td>
                <p id="search-button" class="section-text-normal">
                  <span class="vertical-align-text">Search</span>
                </p>
              </td>
              <td>
                <p id="order-button" class="section-text-normal">
                  <span class="vertical-align-text"></span>
                </p>
              </td>
            </tr>
          </table>

        </div>
        <div class="header-divider divider"></div>
  </div>

  <div id="header-space"></div>

  <div id="primary-container">

    <div class="divider"></div>

    <div class="section">

      <div id="query_results" class="title-anchor"></div>
      <h2 class="section-header">Working With Query Results</h2>

      <div class="section-content section-text-normal">
        <p>
          Methods which execute an sql statement return a PG::result object.
          The object will contain a representations of the desired table data
          when a statement such as SELECT is used.
        </p>

        <p>
          <b>
            result_of_insert = database.exec(<br>
            &#160;&#160;"INSERT INTO my_table (name, age) VALUES ('John', 20)"<br>
            )<br>
            result_of_select = database.exec("SELECT * FROM my_table")<br>
            puts result_of_insert<br>
            puts result_of_select<br>
            #=># &#60;PG::Result:0x007fd6921980f0&#62;<br>
            # #&#60;PG::Result:0x007fd692199360&#62;
          </b>
        </p>

        <p>
          These objects contain the properties <b>ntuples</b> and <b>nfields</b>.
        </p>

        <p>
          <b>
            result_of_select.ntuples<br>
            result_of_select.nfields
          </b>
        </p>

        <ul>
          <li><b>ntuples</b>: This is the number of rows returned</li>
          <li><b>nfields</b>: This is the number of columns returned</li>
        </ul>

        <p>
          Single rows are accessed in the same was array elements are. The
          result of this will be a hash with the column names as keys and the
          contents of the row as values.
        </p>

        <p><b>result_of_select[0]</b></p>

        <p>
          As a single row is represents as a hash each value can be accessed
          by providing the desired column name as a key. All returned values will
          be strings and must be converted to the desired type.
        </p>

        <p><b>result_of_select[0]["id"].to_i</b></p>

        <p>
          The object can also make use of the each method to loop through all
          the returned rows.
        </p>

        <p><b>result.each() {|row_hash| row_hash["id"]}</b></p>

        <p>
          (Sources:<br>
          <a href="https://deveiate.org/code/pg/PG/Result.html">
            Deviate: PG::Result
          </a>)
        </p>
        <p><em>Updated: 14/06/2017</em></p>
      </div>

    </div>

    <div class="divider"></div>

  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" rel="javascript"></script>
  <script src="../j-script/contents-arrays/contents-item.js" rel="javascript"></script>
  <script src="../j-script/contents-arrays/ruby-contents.js" rel="javascript"></script>
  <script src="../j-script/manage-contents.js" rel="javascript"></script>
  <script src="../j-script/contents-arrays/contents-search.js" rel="javascript"></script>
  <script src="../j-script/header.js" rel="javascript"></script>
  <script src="../j-script/summary-layout-switcher.js" rel="javascript"></script>
  <script src="../j-script/summary-pages-events.js" rel="javascript"></script>

</body>

</html>
