<!DOCTYPE html>
<html lang="en">

<head>
  <title>... Summary</title>
  <meta charset="utf-8">
  <link href="../css/basic-layout.css" type="text/css" rel="stylesheet"/>
  <link href="../css/summary-page-layout.css" type="text/css" rel="stylesheet"/>
  <link id="summary-page-layout" href="../css/normal-text-summary-page.css" type="text/css" rel="stylesheet"/>
</head>

<body>

  <div id="header-container">

        <h1 id="main-header">Helpful ...</h1>

        <div id="contents-container">
          <div class="header-divider divider"></div>
          <table id="search-and-sort-table">
            <tr>
              <td>
                <form name="search-form">
                  <input id="contents-search-box" class="section-text-normal" type="text" name="search-term"/>
                </form>
              </td>
              <td>
                <p id="search-button" class="section-text-normal">
                  <span class="vertical-align-text">Search</span>
                </p>
              </td>
              <td>
                <p id="order-button" class="section-text-normal">
                  <span class="vertical-align-text"></span>
                </p>
              </td>
            </tr>
          </table>

        </div>
        <div class="header-divider divider"></div>
  </div>

  <div id="header-space"></div>

  <div id="primary-container">

    <div class="divider"></div>

    <div class="section">

      <div id="run_commands" class="title-anchor"></div>
      <h2 class="section-header">Running SQL Commands</h2>

      <div class="section-content section-text-normal">
        <p>
          A few methods may be used to execute an SQL command with a connected
          database.
        </p>

        <ol>
          <li>
            <b>
              database.exec(<br>
              &#160;&#160;"INSERT INTO my_table (name, age) VALUES ('John', 20)"<br>
              )
            </b>
          </li>

          <p>This method will run the given sql command.</p>

          <li>
            <b>
              database.exec_params(<br>
              &#160;&#160;"INSERT INTO my_table (name, age) VALUES ($1, $2)",<br>
              &#160;&#160;["John", 20]<br>
              )
            </b>
          </li>

          <p>
            This method makes use of an array to insert parameters into the sql
            statments. The location at which the values will be inserted are
            identified using '$1' with each number representing the array
            position to use (where $1 is index 0 and $2 is index 1).
          </p>

          <p>
            Only values may be inserted into the statment. Replacing table names
            or column names with '$1' will result in errors.
          </p>

          <li>
            <b>
              database.prepare(<br>
              &#160;&#160;"command name",<br>
              &#160;&#160;"INSERT INTO my_table (name, age) VALUES ($1, $2)"<br>
              )<br>
              database.exec_prepared("command name", ["John", 20])
            </b>
          </li>

          <p>
            This method is similar to the previous one in the way it adds values
            to the sql statment. The difference is the use of the prepare
            statment, which guards against SQL injections and improves
            performance.
          </p>

          <p>
            The inital method <b>prepare</b> accepts two arguments, a name for
            the sql command (the name may be any string) and the sql command
            itself . Once run the <b>exec_prepared</b> method can be run as
            shown.
          </p>

        </ol>

        <p>
          (Sources:<br>
          <a href="https://stackoverflow.com/questions/25839259/pg-exec-params-not-replacing-parameters">
            Stackoverflow: exec_params not replacing parameters?
          </a><br>
          <a href="https://deveiate.org/code/pg/PG/Connection.html">
            deveiate: PG Connection
          </a><br>
          <a href="http://zetcode.com/db/postgresqlruby/">
            Zetcode: PostgreSQL Ruby tutorial
          </a>)
        </p>
        <p><em>Updated: 14/06/2017</em></p>
      </div>

    </div>

    <div class="divider"></div>

  </div>

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js" rel="javascript"></script>
  <script src="../j-script/contents-arrays/contents-item.js" rel="javascript"></script>
  <script src="../j-script/contents-arrays/ruby-contents.js" rel="javascript"></script>
  <script src="../j-script/manage-contents.js" rel="javascript"></script>
  <script src="../j-script/contents-arrays/contents-search.js" rel="javascript"></script>
  <script src="../j-script/header.js" rel="javascript"></script>
  <script src="../j-script/summary-layout-switcher.js" rel="javascript"></script>
  <script src="../j-script/summary-pages-events.js" rel="javascript"></script>

</body>

</html>
